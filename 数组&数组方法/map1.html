<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>map</title>
</head>
<body>

<script>

    /*
    *  1. map是一个函数，对象是一个回调函数，使用return返回
       2. 返回值是一个新数组，与原数组长度相同的数组，要使用map处理后的数组，需要设置一个变量
       3. 把数组的每一项进行映射，成为一个对象，这个用处很有用
       4. 这种内置方法的复杂程度？？？？         
    * */


    let mapArr = [
        {
            key: 1,
            name: 'jan',
        },
        {
            key: 2,
            name: 'jan1',
        },
        {
            key: 3,
            name: 'jan2',
        },
        {
            key: 4,
            name: 'jan3',
        },

    ];


    /*
     map对每一项执行回调函数
     1. 返值一定是一个数组， 长度与原数组相同
     2. 回调函数的返回值要设置，return 返回值就是数组每一项的值
     */
    let map = mapArr.map((item) => {
        // console.log(item.key)
        return {[item.key]:item.name}
    });
    console.log('maparr----------', mapArr);
    console.log('map----------', map);

    console.log('原生js实现map---------------------------------------')
     let mapFn = function(arr, fn){
        let newArr = [] 
        for(let i=0; i<arr.length; i++){
            // 或者使用push
            // 这里是否使用apply或者call改变函数的this指向？
            newArr[i] = fn(arr[i], i)
         }
         return newArr
     }
     let mymap = mapFn([1,2,3], (item, i)=>{
         console.log('map第二个参数是下标---',i)
         return item*2
     })
     console.log('自己写的map方法---',mymap)
  
    console.log('map来实现的一道题---------------------------------------')
    // 需求，把下边数据转化为resultArr形式的 
    let resultArr = [{name: 'aa'}, {age: '14'}]
    let targetData = {
        rows: [
            ["Lisa", 16, "Female", "2000-12-01"],
            ["Bob", 22, "Male", "1996-01-21"]
        ],
        metaData: [{name: "name", note: ''}, {name: "age", note: ''}, {name: "gender", note: ''}, {
            name: "birthday",
            note: ''
        }
        ]
    };
    
    // 方法一
    // function fn1() {
    //     let arr = [];
    //     targetData.rows.forEach((item, i)=>{
    //         arr[i] = item.map((itm,index)=>{
    //             return {[targetData['metaData'][index]['name']]:itm}
    //         })    
    //     })
    //     return arr
    // }


    function fn2() {
        let arr = [];
        arr = targetData.rows.map(item =>{
            return item.map((itm, index)=>{
                return {[targetData.metaData[index].name]:itm}
            })
        })
        return arr
    }
    console.log('处理后的数组', fn2());

    console.log('fliter---------------------------------------')

    /*filter 用来过滤数组，查找符合条件的数组项
    *
    * 1. 有符合条件的，返回的是一个数组，找不到就是一个空数组（判断一个数组是否为空，可以使用长度）
    * 2. 根据每一项给出的条件返回符合条件的项
    *
    * */
    let filterArray = [
        {
            key: 1,
            name: 'jan',
        },
        {
            key: 2,
            name: 'jan1',
        },
        {
            key: 3,
            name: 'jan2',
        },
        {
            key: 4,
            name: 'jan3',
        },
    ];
    let filter = mapArr.filter((item) => item.key === 4);
    console.log('filter----------', filterArray);
    console.log('filter----------', filter);

    console.log('---------------------------------------')





</script>
</body>
</html>
1